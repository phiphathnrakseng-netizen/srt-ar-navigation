<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ระบบ AR Navigation - วิทยาลัยเทคนิคสุราษฎร์ธานี</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f8fafc; color: #1e293b; overflow-x: hidden; }
        .navy-bg { background-color: #1e3a8a; }
        .navy-border { border-color: #1e3a8a; }
        .floor-section { display: none; }
        
        /* สไตล์ปุ่มเมนูที่เลือก */
        .nav-btn-active { 
            background-color: #1e3a8a; 
            color: white !important; 
            border-bottom: 3px solid #f59e0b; 
        }

        /* Animation พื้นฐาน */
        .formal-card { border-radius: 8px; border: 1px solid #e2e8f0; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .formal-btn { border-radius: 4px; transition: all 0.3s ease; }
        
        /* Effect ตอน Hover ปุ่มห้อง */
        .room-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: #3b82f6;
        }

        header { 
            background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%); 
            position: relative;
            overflow: hidden;
        }

        /* เพิ่มวงกลมจางๆ ตกแต่งพื้นหลัง Header */
        header::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 200px;
            height: 200px;
            background: rgba(255,255,255,0.05);
            border-radius: 50%;
        }

        /* คอนเทนเนอร์การค้นหา */
        .search-focus:focus-within { 
            border-color: #3b82f6; 
            transform: scale(1.02);
        }

        /* Custom Keyframe สำหรับ Header */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-header { animation: fadeInDown 0.8s ease-out; }
    </style>
</head>
<body>

    <div id="guide-modal" class="fixed inset-0 z-[100] flex items-center justify-center hidden">
        <div class="absolute inset-0 bg-slate-900/80 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>
        <div class="relative bg-white w-full max-w-xl mx-4 formal-card shadow-2xl overflow-hidden border-t-4 navy-border transform transition-all scale-95 opacity-0" id="modal-content">
            <div class="p-6 border-b border-slate-100 flex justify-between items-center">
                <h3 class="text-xl font-bold text-slate-800 tracking-tight">ข้อแนะนำการใช้งาน</h3>
                <button onclick="closeModal()" class="text-slate-400 hover:text-slate-600"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="p-8 space-y-6">
                <div class="flex items-start gap-4" data-aos="fade-right" data-aos-delay="100">
                    <div class="bg-blue-100 p-3 formal-btn text-blue-700"><i class="fa-solid fa-location-dot"></i></div>
                    <div>
                        <p class="font-bold text-slate-800">ตำแหน่งเริ่มต้น</p>
                        <p class="text-slate-600 text-sm">กรุณายืนหน้าป้ายแผนกไอที หันหน้าเข้าหาป้ายให้ตรงก่อนเริ่ม</p>
                    </div>
                </div>
                <div class="flex items-start gap-4" data-aos="fade-right" data-aos-delay="200">
                    <div class="bg-amber-100 p-3 formal-btn text-amber-700"><i class="fa-solid fa-person-walking"></i></div>
                    <div>
                        <p class="font-bold text-slate-800">การตรวจจับระยะ</p>
                        <p class="text-slate-600 text-sm">ระบบจะคำนวณระยะจากก้าวเดินจริงของท่าน</p>
                    </div>
                </div>
                <button onclick="closeModal()" class="w-full navy-bg text-white py-4 formal-btn font-bold hover:bg-blue-800 shadow-md uppercase tracking-wider active:scale-95 transition-transform">เริ่มต้นใช้งานระบบ</button>
            </div>
        </div>
    </div>

    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center h-auto md:h-20 py-4 md:py-0">
            <div class="flex items-center gap-4 mb-4 md:mb-0">
                <img src="img/logo-stc.jpg" alt="Logo" class="h-12 w-auto hover:rotate-6 transition-transform cursor-pointer">
                <div class="border-l border-slate-200 pl-4">
                    <h1 class="text-blue-900 font-bold text-base md:text-lg leading-tight uppercase">วิทยาลัยเทคนิคสุราษฎร์ธานี</h1>
                    <p class="text-[11px] text-slate-500 font-bold uppercase tracking-[0.2em]">IT DEPARTMENT AR SYSTEM</p>
                </div>
            </div>
            <div class="flex h-full border-t md:border-t-0 border-slate-100 w-full md:w-auto">
                <a href="index.html" id="nav-scan" class="flex-1 md:flex-none px-6 py-4 md:py-0 flex items-center justify-center text-sm font-bold text-slate-500 hover:text-blue-900 transition-all hover:bg-slate-50">สแกนป้าย</a>
                <a href="?floor=3" id="nav-f3" class="flex-1 md:flex-none px-6 py-4 md:py-0 flex items-center justify-center text-sm font-bold text-slate-500 hover:text-blue-900 transition-all hover:bg-slate-50 border-x border-slate-50">ชั้น 3</a>
                <a href="?floor=4" id="nav-f4" class="flex-1 md:flex-none px-6 py-4 md:py-0 flex items-center justify-center text-sm font-bold text-slate-500 hover:text-blue-900 transition-all hover:bg-slate-50">ชั้น 4</a>
            </div>
        </div>
    </nav>

    <header class="text-white py-20 text-center shadow-inner">
        <div class="max-w-7xl mx-auto px-4 animate-header">
            <h2 class="text-3xl md:text-5xl font-black mb-4 tracking-tight uppercase drop-shadow-lg">AR NAVIGATION</h2>
            <div class="w-24 h-1.5 bg-amber-500 mx-auto mb-6 rounded-full"></div>
            <p class="text-blue-100 max-w-xl mx-auto font-light text-lg">ระบบนำทางอัจฉริยะ แผนกเทคโนโลยีสารสนเทศ</p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            
            <div id="search-container" class="mb-8 flex flex-col md:flex-row gap-4 items-center justify-between bg-white p-5 formal-card shadow-sm hidden" data-aos="fade-up">
                <div class="flex items-center gap-3">
                    <span class="flex h-4 w-4 relative">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-4 w-4 bg-green-500"></span>
                    </span>
                    <span id="location-badge" class="text-xs font-bold text-slate-600 uppercase tracking-widest">กำลังแสดงข้อมูล: ชั้น 3</span>
                </div>
                <div class="relative w-full md:w-80 search-focus transition-all">
                    <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                    <input type="text" id="searchInput" onkeyup="searchRoom()" placeholder="ค้นหาชื่อห้อง..." 
                           class="w-full pl-11 pr-4 py-3 text-sm border-2 border-slate-100 formal-btn focus:outline-none focus:border-blue-600 transition-all shadow-inner bg-slate-50 focus:bg-white">
                </div>
            </div>

            <div id="floor-3" class="floor-section">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 room-list">
                    <button onclick="navigate('631')" class="room-item bg-white border-2 border-slate-100 p-6 formal-card text-left group flex justify-between items-center" data-aos="fade-up" data-aos-delay="100">
                        <div>
                            <span class="block text-xs font-bold text-blue-600 mb-1">ROOM 631</span>
                            <span class="font-bold text-slate-700 text-lg group-hover:text-blue-900 transition-colors">ห้องปฏิบัติการ 631 (ขวา)</span>
                        </div>
                        <i class="fa-solid fa-circle-arrow-right text-2xl text-slate-200 group-hover:text-blue-600 group-hover:translate-x-1 transition-all"></i>
                    </button>
                    <button onclick="navigate('632')" class="room-item bg-white border-2 border-slate-100 p-6 formal-card text-left group flex justify-between items-center" data-aos="fade-up" data-aos-delay="150">
                        <div><span class="block text-xs font-bold text-blue-600 mb-1">ROOM 632</span><span class="font-bold text-slate-700 text-lg">ห้องปฏิบัติการ 632 (ซ้าย)</span></div>
                        <i class="fa-solid fa-circle-arrow-right text-2xl text-slate-200 group-hover:text-blue-600 group-hover:translate-x-1 transition-all"></i>
                    </button>
                    <button onclick="navigate('633')" class="room-item bg-white border-2 border-slate-100 p-6 formal-card text-left group flex justify-between items-center" data-aos="fade-up" data-aos-delay="200">
                        <div><span class="block text-xs font-bold text-blue-600 mb-1">ROOM 633</span><span class="font-bold text-slate-700 text-lg">ห้องปฏิบัติการ 633 (ซ้าย)</span></div>
                        <i class="fa-solid fa-circle-arrow-right text-2xl text-slate-200 group-hover:text-blue-600 group-hover:translate-x-1 transition-all"></i>
                    </button>
                    <button onclick="navigate('634')" class="room-item bg-white border-2 border-slate-100 p-6 formal-card text-left group flex justify-between items-center" data-aos="fade-up" data-aos-delay="250">
                        <div><span class="block text-xs font-bold text-blue-600 mb-1">ROOM 634</span><span class="font-bold text-slate-700 text-lg">ห้องปฏิบัติการ 634 (ซ้าย)</span></div>
                        <i class="fa-solid fa-circle-arrow-right text-2xl text-slate-200 group-hover:text-blue-600 group-hover:translate-x-1 transition-all"></i>
                    </button>
                    <button onclick="navigate('635')" class="room-item col-span-1 md:col-span-2 bg-white border-2 border-slate-100 p-6 formal-card text-left group flex justify-between items-center" data-aos="fade-up" data-aos-delay="300">
                        <div><span class="block text-xs font-bold text-blue-600 mb-1">ROOM 635</span><span class="font-bold text-slate-700 text-lg">ห้องปฏิบัติการ 635 (ซ้ายสุด)</span></div>
                        <i class="fa-solid fa-circle-arrow-right text-2xl text-slate-200 group-hover:text-blue-600 group-hover:translate-x-1 transition-all"></i>
                    </button>
                </div>
            </div>

            <div id="floor-4" class="floor-section">
                <div class="grid grid-cols-1 gap-4">
                    <button onclick="navigate('ห้องพักครู')" class="room-item bg-white p-6 formal-card flex justify-between items-center border-l-8 border-blue-900 shadow-sm" data-aos="fade-left">
                        <span class="font-bold text-slate-700 text-lg">ห้องพักครู (Teacher's Office)</span>
                        <i class="fa-solid fa-user-tie text-blue-900 text-xl"></i>
                    </button>
                    </div>
            </div>

            <div id="empty-state" class="text-center p-16 bg-white formal-card shadow-sm border-t-4 border-amber-500" data-aos="zoom-in">
                <div class="mb-8">
                    <i class="fa-solid fa-map-location-dot text-7xl text-slate-100 animate-bounce"></i>
                </div>
                <h3 class="text-2xl font-bold text-slate-800 mb-4">ค้นหาจุดหมายของคุณ</h3>
                <p class="text-slate-500 mb-10 max-w-sm mx-auto">เลือกชั้นที่ต้องการเพื่อดูรายชื่อห้องปฏิบัติการและเริ่มต้นระบบนำทาง</p>
                <div class="flex flex-col md:flex-row gap-4 justify-center">
                    <a href="?floor=3" class="bg-blue-900 text-white px-10 py-4 formal-btn font-bold hover:bg-blue-800 transition-all shadow-lg hover:shadow-blue-500/30 active:scale-95">ชั้น 3</a>
                    <a href="?floor=4" class="bg-slate-800 text-white px-10 py-4 formal-btn font-bold hover:bg-slate-700 transition-all shadow-lg hover:shadow-slate-500/30 active:scale-95">ชั้น 4</a>
                </div>
            </div>

        </div>
    </main>

    <footer class="bg-slate-900 text-slate-400 py-16 mt-20 border-t-8 border-amber-600">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-white font-bold mb-2">แผนกเทคโนโลยีสารสนเทศ วิทยาลัยเทคนิคสุราษฎร์ธานี</p>
            <p class="text-xs tracking-widest uppercase opacity-50">AR Navigation System Project 2026</p>
        </div>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // เริ่มต้น AOS
        AOS.init({
            duration: 800,
            once: true,
            easing: 'ease-in-out'
        });

        function openModal() { 
            const modal = document.getElementById('guide-modal');
            const content = document.getElementById('modal-content');
            modal.classList.remove('hidden');
            setTimeout(() => {
                content.classList.remove('scale-95', 'opacity-0');
                content.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function closeModal() { 
            const modal = document.getElementById('guide-modal');
            const content = document.getElementById('modal-content');
            content.classList.add('scale-95', 'opacity-0');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        function searchRoom() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            const rooms = document.querySelectorAll('.room-item');
            rooms.forEach(room => {
                const text = room.innerText.toLowerCase();
                if(text.includes(input)) {
                    room.style.display = "flex";
                    room.style.opacity = "1";
                } else {
                    room.style.display = "none";
                }
            });
        }

        function initApp() {
            const params = new URLSearchParams(window.location.search);
            const floor = params.get('floor');
            const s3 = document.getElementById('floor-3');
            const s4 = document.getElementById('floor-4');
            const empty = document.getElementById('empty-state');
            const searchBar = document.getElementById('search-container');
            const badge = document.getElementById('location-badge');

            if (floor === '3') {
                s3.style.display = 'block';
                searchBar.style.display = 'flex';
                document.getElementById('nav-f3').classList.add('nav-btn-active');
            } else if (floor === '4') {
                s4.style.display = 'block';
                searchBar.style.display = 'flex';
                badge.innerText = "กำลังแสดงข้อมูล: ชั้น 4 (IT)";
                document.getElementById('nav-f4').classList.add('nav-btn-active');
            } else {
                empty.style.display = 'block';
                document.getElementById('nav-scan').classList.add('nav-btn-active');
                setTimeout(openModal, 1000); // แสดง Modal หลังจากโหลด 1 วินาที
            }
        }

        function navigate(roomId) {
            // ใส่เอฟเฟกต์การสั่นสั้นๆ ก่อนไปหน้าถัดไป
            document.body.style.opacity = "0.5";
            setTimeout(() => {
                window.location.href = `ar-view.html?target=${encodeURIComponent(roomId)}`;
            }, 200);
        }

        window.onload = initApp;
    </script>
</body>
</html>
