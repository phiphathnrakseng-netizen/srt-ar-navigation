<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏≥‡∏ó‡∏≤‡∏á AR | ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --stc-beige-light: #F9F7F2;
            --stc-beige-dark: #E8E2D6;
            --stc-navy: #1A365D;
            --stc-accent: #D4A373;
            --stc-text: #4A4439;
            --stc-white: #FFFFFF;
        }

        body { 
            font-family: 'Noto Sans Thai', sans-serif; 
            background-color: var(--stc-beige-light); 
            color: var(--stc-text);
            margin: 0;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* --- Loading Screen Styles --- */
        #loading-screen {
            position: fixed;
            inset: 0;
            background: var(--stc-beige-light);
            z-index: 9999;
            display: none; 
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.6s;
            will-change: opacity;
        }

        .logo-container {
            position: relative;
            width: 140px;
            height: 140px;
            background: white;
            border-radius: 40px !important;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
            margin-bottom: 2.5rem;
            animation: fadeInScale 0.8s ease-out forwards;
        }

        .logo-container img {
            width: 70%;
            height: 70%;
            object-fit: contain;
            animation: pulseLogo 2s infinite ease-in-out;
        }

        .loader-wrapper {
            width: 280px;
            text-align: center;
        }

        .progress-bar-bg {
            width: 100%;
            height: 6px;
            background: var(--stc-beige-dark);
            border-radius: 10px !important;
            overflow: hidden;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .progress-bar-fill {
            width: 0%;
            height: 100%;
            background: var(--stc-accent);
            border-radius: 10px !important;
            transition: width 0.3s ease-out;
        }

        .speed-info {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--stc-accent);
            font-weight: 600;
            font-size: 0.85rem;
        }

        @keyframes pulseLogo {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* --- UI Elements --- */
        * { border-radius: 24px !important; }
        .no-round { border-radius: 0 !important; }

        .official-header {
            background: var(--stc-white);
            margin: 15px;
            padding: 4rem 2rem;
            color: var(--stc-text);
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
            border: 1px solid rgba(0,0,0,0.03);
        }

        .btn-official {
            background: var(--stc-navy);
            color: white;
            font-weight: 600;
            padding: 18px 32px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(26, 54, 93, 0.2);
        }

        .btn-official:hover { 
            transform: translateY(-5px);
            box-shadow: 0 15px 25px rgba(26, 54, 93, 0.3);
        }

        .room-card {
            background: var(--stc-white);
            border: 1px solid rgba(0,0,0,0.05);
            padding: 24px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .room-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.06);
            border-color: var(--stc-accent);
        }

        .nav-official {
            background: rgba(249, 247, 242, 0.8);
            backdrop-filter: blur(10px);
            height: 80px;
            margin-bottom: 10px;
            border-radius: 0 !important;
        }

        .nav-link {
            padding: 10px 24px;
            font-weight: 600;
            color: var(--stc-text);
            transition: all 0.3s;
            border-radius: 100px !important;
        }

        .nav-link-active {
            color: var(--stc-white);
            background: var(--stc-accent);
        }

        .section-tag {
            background: #F0EAD6;
            color: var(--stc-accent);
            padding: 6px 18px;
            font-size: 12px;
            font-weight: 700;
            display: inline-block;
            margin-bottom: 16px;
            border-radius: 100px !important;
        }

        #searchInput {
            background: var(--stc-white);
            border: 1px solid var(--stc-beige-dark);
            border-radius: 20px !important;
        }

        #searchInput:focus {
            border-color: var(--stc-accent);
            box-shadow: 0 0 0 4px rgba(212, 163, 115, 0.1);
        }
        
        .scale-in-center {
            animation: scale-in-center 0.4s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;
        }

        @keyframes scale-in-center {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="logo-container">
            <img src="favicon.png" alt="STC Logo" onerror="this.src='https://upload.wikimedia.org/wikipedia/th/a/a2/Surat_Thani_Technical_College_Logo.png'">
        </div>
        <div class="loader-wrapper">
            <h2 class="text-[#4A4439] font-bold mb-4 text-lg tracking-wide">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏≥‡∏ó‡∏≤‡∏á...</h2>
            <div class="progress-bar-bg">
                <div id="progress-fill" class="progress-bar-fill"></div>
            </div>
            <div class="speed-info">
                <span id="speed-text" class="italic opacity-60">Preparing your experience</span>
            </div>
        </div>
    </div>

    <div id="guide-modal" class="fixed inset-0 z-[100] flex items-center justify-center p-4 hidden">
        <div class="absolute inset-0 bg-[#4A4439]/40 backdrop-blur-sm transition-opacity no-round"></div>
        <div class="relative bg-white max-w-[450px] w-full shadow-2xl p-8 scale-in-center">
            <div class="flex justify-between items-center mb-6">
                <div class="section-tag mb-0">Instruction</div>
                <button onclick="closeModal()" class="text-slate-400 hover:text-red-400"><i class="fa-solid fa-circle-xmark text-2xl"></i></button>
            </div>
            <h3 class="text-2xl font-bold text-slate-800 mb-4">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</h3>
            <p class="text-slate-500 mb-8 leading-relaxed">
                ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AR ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏¢‡∏∑‡∏ô‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì <span class="text-[#D4A373] font-bold">‡∏õ‡πâ‡∏≠‡∏°‡∏¢‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</span> ‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡πâ‡∏≠‡∏á
            </p>
            <button onclick="closeModal()" class="w-full btn-official text-lg">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        </div>
    </div>

    <nav class="nav-official sticky top-0 z-50 flex justify-between items-center px-8">
        <div class="flex items-center gap-3 cursor-pointer" onclick="window.location.href='index.html'">
            <img src="favicon.png" class="h-10 w-10 object-contain" alt="STC Logo">
            <div class="hidden sm:block">
                <div class="font-bold text-sm text-[#1A365D]">Technical College</div>
                <div class="text-[10px] font-medium text-slate-400 uppercase tracking-widest">Surat Thani</div>
            </div>
        </div>
        <div class="flex gap-2">
            <a href="index.html" class="nav-link text-sm" id="nav-home">Home</a>
            <a href="?floor=3" class="nav-link text-sm" id="nav-f3">F3</a>
            <a href="?floor=4" class="nav-link text-sm" id="nav-f4">F4</a>
        </div>
    </nav>

    <header class="official-header">
        <div class="max-w-4xl mx-auto">
            <div class="section-tag">Information Technology</div>
            <h1 class="text-4xl md:text-5xl font-extrabold text-[#1A365D] mb-4 tracking-tight">
                IT AR Navigation
            </h1>
            <p class="text-slate-400 max-w-lg mx-auto text-sm leading-loose">
                ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÅ‡∏ú‡∏ô‡∏Å‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏® <br>
                ‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ Augmented Reality
            </p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-6 py-10">
        <div id="search-container" class="mb-10 hidden">
            <div class="max-w-xl mx-auto relative group">
                <input type="text" id="searchInput" onkeyup="searchRoom()" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô..." class="w-full p-5 pl-14 outline-none font-medium text-lg text-slate-600 transition-all">
                <i class="fa-solid fa-magnifying-glass absolute left-6 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within:text-[#D4A373]"></i>
            </div>
            <p class="text-center mt-4 text-xs font-bold text-slate-300 uppercase tracking-widest">Floor: <span id="floor-title" class="text-[#D4A373]">--</span></p>
        </div>

        <div id="start-phase" class="hidden">
            <div class="bg-white p-10 mb-8 room-card !border-none shadow-sm flex flex-col md:flex-row items-center gap-10">
                <div class="w-24 h-24 bg-[#F9F7F2] rounded-full flex items-center justify-center text-3xl text-[#D4A373]">
                    <i class="fa-solid fa-map-pin"></i>
                </div>
                <div class="flex-1 text-center md:text-left">
                    <h3 class="text-2xl font-bold mb-2">‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏Å</h3>
                    <p class="text-slate-400 mb-6">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡πâ‡∏≠‡∏°‡∏¢‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢ ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÅ‡∏ú‡∏ô‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ</p>
                    <button onclick="navigate('TO_IT_BUILDING')" class="btn-official w-full md:w-auto">
                        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á AR <i class="fa-solid fa-location-arrow"></i>
                    </button>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <a href="?floor=3" class="p-8 bg-white border border-slate-100 hover:border-[#D4A373] transition-all text-center">
                    <i class="fa-solid fa-stairs text-2xl mb-4 text-[#D4A373]"></i>
                    <div class="font-bold">‡∏ä‡∏±‡πâ‡∏ô 3 (‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)</div>
                </a>
                <a href="?floor=4" class="p-8 bg-white border border-slate-100 hover:border-[#D4A373] transition-all text-center">
                    <i class="fa-solid fa-flask text-2xl mb-4 text-[#D4A373]"></i>
                    <div class="font-bold">‡∏ä‡∏±‡πâ‡∏ô 4 (LAB / ‡∏Ñ‡∏£‡∏π)</div>
                </a>
            </div>
        </div>

        <div id="floor-3" class="hidden"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="rooms-3"></div></div>
        <div id="floor-4" class="hidden"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="rooms-4"></div></div>

        <div id="empty-state" class="text-center py-20 hidden">
            <div class="text-6xl mb-6">üß≠</div>
            <h2 class="text-xl font-bold text-slate-400">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</h2>
            <a href="index.html" class="mt-6 inline-block text-[#D4A373] font-bold underline">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        </div>
    </main>

    <footer class="py-12 px-6 text-center">
        <div class="w-10 h-1 bg-slate-200 mx-auto mb-8 rounded-full"></div>
        <p class="text-[11px] font-bold text-slate-300 uppercase tracking-[0.4em] mb-4">Department of IT @ STC</p>
        <div class="flex justify-center gap-6">
            <i class="fa-brands fa-facebook-f text-slate-300 hover:text-[#1A365D] transition-colors"></i>
            <i class="fa-solid fa-envelope text-slate-300 hover:text-[#1A365D] transition-colors"></i>
        </div>
    </footer>

    <script>
        function runLoading() {
            const loadingScreen = document.getElementById('loading-screen');
            const progressFill = document.getElementById('progress-fill');
            const speedText = document.getElementById('speed-text');
            const isFirstVisit = !sessionStorage.getItem('stc_minimal_init');

            if (!isFirstVisit) {
                loadingScreen.style.display = 'none';
                return;
            }

            loadingScreen.style.display = 'flex';
            let progress = 0;
            const timer = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(timer);
                    setTimeout(() => {
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                            sessionStorage.setItem('stc_minimal_init', 'true');
                            if (!new URLSearchParams(window.location.search).get('floor')) {
                                document.getElementById('guide-modal').classList.remove('hidden');
                            }
                        }, 600);
                    }, 500);
                } else {
                    progressFill.style.width = progress + '%';
                    speedText.innerText = `Loading Assets... ${Math.round(progress)}%`;
                }
            }, 80);
        }

        const navigationData = {
            "TO_IT_BUILDING": { angle: 0, dist: 195, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡πâ‡∏≠‡∏°‡∏¢‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏∂‡∏Å 11 ‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤‡∏°‡∏∑‡∏≠‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤" },
            "DEPT_LABEL_3": { angle: 5, dist: 205, guide: "‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏õ‡πâ‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ú‡∏ô‡∏Å‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡πÇ‡∏ñ‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å" },
            "631": { angle: 5, dist: 215, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πÑ‡∏õ‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ù‡∏±‡πà‡∏á‡∏Ç‡∏ß‡∏≤" },
            "632": { angle: 5, dist: 220, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πÑ‡∏õ‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ù‡∏±‡πà‡∏á‡∏Ç‡∏ß‡∏≤" },
            "633": { angle: 5, dist: 225, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πÑ‡∏õ‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ù‡∏±‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢" },
            "634": { angle: 5, dist: 230, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πÑ‡∏õ‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏∏‡∏î‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤" },
            "635": { angle: 5, dist: 210, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πÑ‡∏õ‡∏ä‡∏±‡πâ‡∏ô 3 ‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏£‡∏Å‡∏ã‡πâ‡∏≤‡∏¢‡∏°‡∏∑‡∏≠" },
            "TEACHER_ROOM": { angle: 5, dist: 220, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πÑ‡∏õ‡∏ä‡∏±‡πâ‡∏ô 4 ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤‡∏°‡∏∑‡∏≠" },
            "LECTURE": { angle: 5, dist: 225, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πÑ‡∏õ‡∏ä‡∏±‡πâ‡∏ô 4 ‡∏´‡πâ‡∏≠‡∏á‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ã‡πâ‡∏≤‡∏¢‡∏°‡∏∑‡∏≠" },
            "LAB1": { angle: 5, dist: 230, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ä‡∏±‡πâ‡∏ô 4 ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ 1" },
            "LAB2": { angle: 5, dist: 235, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ä‡∏±‡πâ‡∏ô 4 ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ 2" },
            "LAB3": { angle: 5, dist: 240, guide: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏™‡∏π‡πà‡∏ï‡∏∂‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ä‡∏±‡πâ‡∏ô 4 ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ 3" }
        };

        function closeModal() {
            document.getElementById('guide-modal').classList.add('hidden');
        }
        
        function getRoomName(id) {
            const names = {
                "DEPT_LABEL_3": "‡∏õ‡πâ‡∏≤‡∏¢‡πÅ‡∏ú‡∏ô‡∏Å‡πÑ‡∏≠‡∏ó‡∏µ (‡∏ä‡∏±‡πâ‡∏ô 3)", "631": "‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 631", "632": "‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 632", "633": "‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 633",
                "634": "‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 634", "635": "‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 635", "TEACHER_ROOM": "‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π",
                "LECTURE": "‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏Ñ‡πÄ‡∏ä‡∏≠‡∏£‡πå", "LAB1": "‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏õ 1", "LAB2": "‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏õ 2", "LAB3": "‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏õ 3"
            };
            return names[id] || id;
        }

        function initApp() {
            const params = new URLSearchParams(window.location.search);
            const floor = params.get('floor');
            const s3 = document.getElementById('floor-3');
            const s4 = document.getElementById('floor-4');
            const searchBar = document.getElementById('search-container');
            const startPhase = document.getElementById('start-phase');
            
            if (floor === '3') {
                s3.classList.remove('hidden'); searchBar.classList.remove('hidden');
                document.getElementById('nav-f3').classList.add('nav-link-active');
                document.getElementById('floor-title').innerText = "3"; 
                renderRooms(3);
            } else if (floor === '4') {
                s4.classList.remove('hidden'); searchBar.classList.remove('hidden');
                document.getElementById('nav-f4').classList.add('nav-link-active');
                document.getElementById('floor-title').innerText = "4"; 
                renderRooms(4);
            } else if (!floor) {
                startPhase.classList.remove('hidden');
                document.getElementById('nav-home').classList.add('nav-link-active');
            } else {
                document.getElementById('empty-state').classList.remove('hidden');
            }
        }

        function renderRooms(floor) {
            const container = document.getElementById(`rooms-${floor}`);
            container.innerHTML = '';
            Object.keys(navigationData).forEach(key => {
                if (key === "TO_IT_BUILDING") return;
                const isFloor3 = key.startsWith('63') || key === "DEPT_LABEL_3";
                if ((floor === 3 && isFloor3) || (floor === 4 && !isFloor3)) {
                    container.innerHTML += `
                        <button onclick="navigate('${key}')" class="room-card text-left">
                            <h4 class="text-xl font-bold text-slate-700 mb-2">${getRoomName(key)}</h4>
                            <div class="text-[#D4A373] text-sm font-semibold flex items-center gap-2">
                                Start AR <i class="fa-solid fa-chevron-right text-[10px]"></i>
                            </div>
                        </button>`;
                }
            });
        }

        function searchRoom() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            document.querySelectorAll('.room-card').forEach(card => {
                card.style.display = card.textContent.toLowerCase().includes(input) ? 'block' : 'none';
            });
        }

        function navigate(roomId) {
            const data = navigationData[roomId];
            if(!data) return;
            window.location.href = `ar-view.html?target=${roomId}&angle=${data.angle}&dist=${data.dist}&guide=${encodeURIComponent(data.guide)}`;
        }

        window.addEventListener('DOMContentLoaded', () => {
            runLoading();
            initApp();
        });
    </script>
</body>
</html>
